- 开始日期：2021-11-23
- 作者：糖饼

# 目标

为 Web Widget 应用提供启动参数的功能。

# 动机

这并不是一个独特的提案，启动参数这个概念和我们理解的桌面应用程序一样。

在 Web Widget 应用里，有会诸多的启动参数信息需要告诉应用程序，以便它们能够正确的处理逻辑。例如当应用程序接收到 `sandboxed` 字段后，应用程序应当遵循沙盒环境的限制而执行逻辑。

```html
<web-widget sandboxed src="app.widget.js"></web-widget>
```

```js
export async function mount({ sandboxed }) {
  if (!sandboxed) {
    // [more code]
  }
})
```

`sandboxed` 参数是作为内置到 Web Widget 应用标准接口中的，但我们还会为 Web Widget 应用标准化越来越多的参数，例如 `theme`，而现阶段我们却没有一个真正属于应用程序参数的获取方式，因此这是为什么要提出此 RFC 的动机。

# 产出

- 提供可以自由设置的应用程序参数标准，供用户通过可视化编辑器或者胶水代码来使用
- 将可视化编辑器所需要参数作为应用参数的一部分单独维护，避免侵入应用程序格式标准

# 提议内容

在 Web Widget 应用接口中，增加 `parameters` 字段作为应用启动参数。

* 它是一个被冻结的 `object` 结构
* 当 Web Widget 应用加载后，它就无法再变更

## 替代方案对比

`data` 可以作为一种代替方案，但是它有一些不同：`data` 是被被设计为应用的数据，它可能会被反序列化后保存在服务端或者本地存储中，而应用程序参数会包含很多不需要存储的数据。

## 指引和例子

如果方案改变了已有的设计、或者添加了新的设计，设计者需要创建一个端到端的例子来展示新能力要怎样使用，最好是一份指南。

## 成果输出

- 本次提案可以带来怎样的影响力

## 迭代策略

- 用户接触到的部分会怎样改变？
- 这个特性会怎么发布出去？

## 兼容性

- 当前设计是否符合向前兼容性和向后兼容性要求？

# 详细设计

这个章节是可选的。列出那些对于理解当前设计很重要的信息。

# 需要讨论的问题

如果希望从 RFC 流程中获得反馈，需要在这里列出你的开放问题。
